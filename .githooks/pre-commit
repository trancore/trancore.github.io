#!/bin/sh

# Load user's shell profile to get PATH for pnpm
if [ -f "$HOME/.zshrc" ]; then
  source "$HOME/.zshrc"
elif [ -f "$HOME/.bash_profile" ]; then
  source "$HOME/.bash_profile"
elif [ -f "$HOME/.bashrc" ]; then
  source "$HOME/.bashrc"
fi

echo "start pre-commit."

echo "ğŸš€ Running format..."
pnpm run format --write
if [ $? -ne 0 ]; then
  echo "ğŸ‘ format failed. Aborting commit."
  exit 1
fi
echo "ğŸ‘ format checks passed."

echo "ğŸš€ Running lint checks..."
pnpm run lint
if [ $? -ne 0 ]; then
  echo "ğŸ‘ lint failed. Aborting commit."
  exit 1
fi
echo "ğŸ‘ lint checks passed."

echo "ğŸš€ Running type checks..."
pnpm run check:types
if [ $? -ne 0 ]; then
  echo "ğŸ‘ type-checks failed. Aborting commit."
  exit 1
fi
echo "ğŸ‘ type checks passed."